{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","components/Modal/Modal.js","components/ErrorMessage/ErrorMessage.js","services/apiService.js","App.js","index.js"],"names":["Searchbar","className","onSubmit","this","props","type","onChange","handleChange","name","value","query","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","image","onOpen","onClick","largeImageURL","src","webformatURL","alt","tags","ImageGallery","images","map","index","Loader","color","height","width","timeout","Button","onLoadMore","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","console","log","onClose","handleBackdropClick","event","currentTarget","target","window","addEventListener","removeEventListener","createPortal","ErrorMessage","message","axios","defaults","baseURL","getPictures","page","get","then","resp","data","hits","App","state","setOfImages","bigImg","showModal","status","error","handlChangeQuery","setState","handleSubmit","preventDefault","resetState","trim","response","toast","img","prevState","openModal","closeModal","prevProps","catch","finally","loading","scrollTo","top","documentElement","scrollHeight","behavior","length","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"wRAEMA,E,4JACJ,WACE,OACE,wBAAQC,UAAU,YAAlB,SACE,uBAAMC,SAAUC,KAAKC,MAAMF,SAAUD,UAAU,aAA/C,UACE,wBAAQI,KAAK,SAASJ,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEK,SAAUH,KAAKC,MAAMG,aACrBN,UAAU,mBACVI,KAAK,OACLG,KAAK,QACLC,MAAON,KAAKC,MAAMM,MAClBC,aAAa,MACbC,WAAS,EACTC,YAAY,sC,GAjBAC,aCAxB,SAASC,EAAT,GAA8C,IAAlBC,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,OAEjC,OACE,oBACEhB,UAAU,mBACViB,QAAS,kBAAMD,EAAOD,EAAMG,gBAF9B,SAIE,qBACEC,IAAKJ,EAAMK,aACXC,IAAKN,EAAMO,KACXtB,UAAU,6BCRlB,SAASuB,EAAT,GAA2C,IAAnBC,EAAkB,EAAlBA,OAAQR,EAAU,EAAVA,OAC9B,OACE,oBAAIhB,UAAU,eAAd,SACGwB,EAAOC,KAAI,SAACV,EAAOW,GAAR,OACV,cAACZ,EAAD,CAAkBC,MAAOA,EAAmBC,OAAQA,GAAfU,Q,qBCN7C,SAASC,IACP,OACE,qBAAK3B,UAAU,SAAf,SACE,cAAC,IAAD,CACEI,KAAK,YACLwB,MAAM,UACNC,OAAQ,GACRC,MAAO,GACPC,QAAS,QCRjB,SAASC,EAAT,GAAiC,IAAfC,EAAc,EAAdA,WAChB,OACE,qBAAKjC,UAAU,kBAAf,SACE,wBAAQI,KAAK,SAASJ,UAAU,SAASiB,QAASgB,EAAlD,yBCFN,IAAMC,EAAYC,SAASC,cAAc,eAEnCC,E,4MAWJC,cAAgB,SAAAC,GACC,WAAXA,EAAEC,OACJC,QAAQC,IAAI,kKAEZ,EAAKvC,MAAMwC,Y,EAIfC,oBAAsB,SAAAC,GAMhBA,EAAMC,gBAAkBD,EAAME,QAChC,EAAK5C,MAAMwC,W,uDAzBf,WAEEK,OAAOC,iBAAiB,UAAW/C,KAAKoC,iB,kCAG1C,WAEEU,OAAOE,oBAAoB,UAAWhD,KAAKoC,iB,oBAsB7C,WACE,OAAOa,uBACL,qBAAKnD,UAAU,UAAUiB,QAASf,KAAK0C,oBAAvC,SACE,qBAAK5C,UAAU,QAAf,SACE,qBACEmB,IAAKjB,KAAKC,MAAMgB,IAChBE,IAAKnB,KAAKC,MAAMkB,IAChBS,MAAM,SACND,OAAO,cAKbK,O,GA3CcrB,aCFduC,EAAe,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAO,4BAAIA,K,iBCHbC,IAAMC,SAASC,QAAU,0BAGlB,SAASC,EAAYhD,EAAOiD,GACjC,OAAOJ,IACJK,IADI,sDAE4ClD,EAF5C,iBAE0DiD,EAF1D,4BAHO,uCAOXE,MAAK,SAAAC,GAAI,OAAIA,EAAKC,KAAKC,Q,UCItBC,E,4MACJC,MAAQ,CACNxD,MAAO,GACPyD,YAAa,GACbR,KAAM,EACNS,OAAQ,KACRC,WAAW,EACXC,OAAQ,OACRC,MAAO,M,EAmBTC,iBAAmB,SAAAhC,GAEjB,EAAKiC,SAAL,eACGjC,EAAEO,cAAcvC,KAAOgC,EAAEO,cAActC,S,EAI5CiE,aAAe,SAAAlC,GACbA,EAAEmC,iBACF,EAAKC,aAE2B,KAA5B,EAAKV,MAAMxD,MAAMmE,OAIrBnB,EAAY,EAAKQ,MAAMxD,MAAO,EAAKwD,MAAMP,MAAME,MAAK,SAAAiB,GAAQ,OAC1D,EAAKL,SAAS,CAAEN,YAAaW,EAAUR,OAAQ,gBAJ/CS,IAAMR,MAAM,8C,EAQhBK,WAAa,WACX,EAAKH,SAAS,CACZN,YAAa,GACbR,KAAM,EACNY,MAAO,Q,EAIXrC,WAAa,WACX,MAAwB,EAAKgC,MAC7BR,EADA,EAAQhD,MAAR,EAAeiD,MACUE,MAAK,SAAAmB,GAAG,OAC/B,EAAKP,UAAS,SAAAQ,GAAS,MAAK,CAC1Bd,YAAY,GAAD,mBAAMc,EAAUd,aAAhB,YAAgCa,IAC3CrB,KAAMsB,EAAUtB,KAAO,EACvBW,OAAQ,mB,EAKdY,UAAY,SAAA/D,GACV,EAAKsD,SAAS,CACZJ,WAAW,EACXD,OAAQjD,K,EAIZgE,WAAa,kBAAM,EAAKV,SAAS,CAAEJ,WAAW,K,wDA9D9C,SAAmBe,EAAWH,GAAY,IAAD,OACvC,EAAwB9E,KAAK+D,MAArBxD,EAAR,EAAQA,MAAOiD,EAAf,EAAeA,KACXsB,EAAUvE,QAAUA,IACtBP,KAAKsE,SAAS,CAAEH,OAAQ,YACxBZ,EAAYhD,EAAOiD,GAChB0B,OAAM,SAAAd,GAAK,OAAI,EAAKE,SAAS,CAAEF,QAAOD,OAAQ,gBAC9CgB,SAAQ,kBAAM,EAAKb,SAAS,CAAEc,SAAS,QAExCpF,KAAK+D,MAAMP,KAAO,GACpBV,OAAOuC,SAAS,CACdC,IAAKrD,SAASsD,gBAAgBC,aAC9BC,SAAU,a,oBA4DhB,WACE,OACE,gCACE,cAAC,EAAD,CACElF,MAAOP,KAAK+D,MAAMxD,MAClBH,aAAcJ,KAAKqE,iBACnBtE,SAAUC,KAAKuE,eAGjB,cAAClD,EAAD,CACEC,OAAQtB,KAAK+D,MAAMC,YACnBR,KAAMxD,KAAK+D,MAAMP,KACjB1C,OAAQd,KAAK+E,YAIQ,YAAtB/E,KAAK+D,MAAMI,QAAwB,cAAC1C,EAAD,IAEnCzB,KAAK+D,MAAMC,YAAY0B,OAAS,GAC/B,cAAC5D,EAAD,CAAQC,WAAY/B,KAAK+B,aAE1B/B,KAAK+D,MAAMG,WACV,cAAC,EAAD,CACEzB,QAASzC,KAAKgF,WAEd/D,IAAKjB,KAAK+D,MAAME,OAChB9C,IAAKnB,KAAK+D,MAAMxD,QAGpB,cAAC,IAAD,CAAgBoF,UAAW,MACJ,aAAtB3F,KAAK+D,MAAMI,QACV,cAAC,EAAD,CAAchB,QAASnD,KAAK+D,MAAMK,e,GAjH1BzD,aAwHHmD,IChIf8B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF7D,SAAS8D,eAAe,W","file":"static/js/main.a5ac80bd.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nclass Searchbar extends Component {\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.props.onSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            onChange={this.props.handleChange}\n            className=\"SearchForm-input\"\n            type=\"text\"\n            name=\"query\"\n            value={this.props.query}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport { Searchbar };\n","import React from 'react';\n\nfunction ImageGalleryItem({ image, onOpen }) {\n  // console.log(image);\n  return (\n    <li\n      className=\"ImageGalleryItem\"\n      onClick={() => onOpen(image.largeImageURL)}\n    >\n      <img\n        src={image.webformatURL}\n        alt={image.tags}\n        className=\"ImageGalleryItem-image\"\n      />\n    </li>\n  );\n}\n\nexport { ImageGalleryItem };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { ImageGalleryItem } from '../ImageGalleryItem/ImageGalleryItem';\n\nfunction ImageGallery({ images, onOpen }) {\n  return (\n    <ul className=\"ImageGallery\">\n      {images.map((image, index) => (\n        <ImageGalleryItem image={image} key={index} onOpen={onOpen} />\n      ))}\n    </ul>\n  );\n}\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      largeImageURL: PropTypes.string.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ),\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport { ImageGallery };\n","import NewLoader from 'react-loader-spinner';\n\nfunction Loader() {\n  return (\n    <div className=\"loader\">\n      <NewLoader\n        type=\"ThreeDots\"\n        color=\"#3f51b5\"\n        height={80}\n        width={80}\n        timeout={3000} //3 secs\n      />\n    </div>\n  );\n}\n\nexport { Loader };\n","import React from 'react';\n\nfunction Button({ onLoadMore }) {\n  return (\n    <div className=\"containerButton\">\n      <button type=\"button\" className=\"button\" onClick={onLoadMore}>\n        load more\n      </button>\n    </div>\n  );\n}\n\nexport { Button };\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    // console.log('Modal componentDidMount');\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    // console.log('Modal componentWillUnmount');\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      console.log('Нажали ESC, нужно закрыть модалку');\n\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    // console.log('Кликнули в бекдроп');\n\n    // console.log('currentTarget: ', event.currentTarget);\n    // console.log('target: ', event.target);\n\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">\n          <img\n            src={this.props.src}\n            alt={this.props.alt}\n            width=\"1200px\"\n            height=\"800px\"\n          />\n          {/* {this.props.children} */}\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport { Modal };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ErrorMessage = ({ message }) => {\n  return <p>{message}</p>;\n};\n\nErrorMessage.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n\nexport { ErrorMessage };\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api';\nconst API_KEY = '23028809-0eadab1d20ccc1cb386303aa3';\n\nexport function getPictures(query, page) {\n  return axios\n    .get(\n      `/?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=${API_KEY}`,\n    )\n    .then(resp => resp.data.hits);\n}\n","import React, { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\n\nimport { Searchbar } from './components/Searchbar/Searchbar';\nimport { ImageGallery } from './components/ImageGallery/ImageGallery';\nimport { Loader } from './components/Loader/Loader';\nimport { Button } from './components/Button/Button';\nimport { Modal } from './components/Modal/Modal';\nimport { ErrorMessage } from './components/ErrorMessage/ErrorMessage';\nimport { getPictures } from './services/apiService';\n\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass App extends Component {\n  state = {\n    query: '',\n    setOfImages: [],\n    page: 1,\n    bigImg: null,\n    showModal: false,\n    status: 'idle',\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { query, page } = this.state;\n    if (prevState.query !== query) {\n      this.setState({ status: 'pending' });\n      getPictures(query, page)\n        .catch(error => this.setState({ error, status: 'rejected' }))\n        .finally(() => this.setState({ loading: false }));\n    }\n    if (this.state.page > 1) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  handlChangeQuery = e => {\n    // console.log(e.currentTarget.value);\n    this.setState({\n      [e.currentTarget.name]: e.currentTarget.value,\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.resetState();\n\n    if (this.state.query.trim() === '') {\n      toast.error('Nothing for request! Please type the word');\n      return;\n    }\n    getPictures(this.state.query, this.state.page).then(response =>\n      this.setState({ setOfImages: response, status: 'resolved' }),\n    );\n  };\n\n  resetState = () => {\n    this.setState({\n      setOfImages: [],\n      page: 1,\n      error: null,\n    });\n  };\n\n  onLoadMore = () => {\n    const { query, page } = this.state;\n    getPictures(query, page).then(img =>\n      this.setState(prevState => ({\n        setOfImages: [...prevState.setOfImages, ...img],\n        page: prevState.page + 1,\n        status: 'resolved',\n      })),\n    );\n  };\n\n  openModal = largeImageURL => {\n    this.setState({\n      showModal: true,\n      bigImg: largeImageURL,\n    });\n  };\n\n  closeModal = () => this.setState({ showModal: false });\n\n  // toggleModal = largeImageURL => {\n  //   this.setState(({ showModal }) => ({\n  //     showModal: !showModal,\n  //   }));\n  //   this.setState({ bigImg: largeImageURL });\n  // };\n\n  render() {\n    return (\n      <div>\n        <Searchbar\n          query={this.state.query}\n          handleChange={this.handlChangeQuery}\n          onSubmit={this.handleSubmit}\n        />\n\n        <ImageGallery\n          images={this.state.setOfImages}\n          page={this.state.page}\n          onOpen={this.openModal}\n          // onOpen={this.toggleModal}\n        />\n\n        {this.state.status === 'pending' && <Loader />}\n\n        {this.state.setOfImages.length > 0 && (\n          <Button onLoadMore={this.onLoadMore} />\n        )}\n        {this.state.showModal && (\n          <Modal\n            onClose={this.closeModal}\n            // onClose={this.toggleModal}\n            src={this.state.bigImg}\n            alt={this.state.query}\n          />\n        )}\n        <ToastContainer autoClose={2000} />\n        {this.state.status === 'rejected' && (\n          <ErrorMessage message={this.state.error} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}